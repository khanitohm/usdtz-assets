<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“± Mobile App Logo Compatibility Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 15px;
            min-height: 100vh;
            color: white;
        }
        .container {
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #667eea;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            max-width: 500px;
            margin: 0 auto;
        }
        h1 {
            color: #667eea;
            font-size: 1.8em;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 10px #667eea;
        }
        .platform-test {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .platform-test h3 {
            margin: 0 0 10px 0;
            color: #667eea;
            font-size: 1.2em;
        }
        .logo-preview {
            text-align: center;
            margin: 15px 0;
        }
        .logo-preview img {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            border: 2px solid #667eea;
            margin: 5px;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        .status {
            padding: 10px;
            border-radius: 8px;
            margin: 8px 0;
            font-weight: bold;
            font-size: 0.9em;
        }
        .success { background: rgba(40, 167, 69, 0.3); border: 1px solid #28a745; color: #28a745; }
        .error { background: rgba(220, 53, 69, 0.3); border: 1px solid #dc3545; color: #dc3545; }
        .warning { background: rgba(255, 193, 7, 0.3); border: 1px solid #ffc107; color: #ffc107; }
        .info { background: rgba(23, 162, 184, 0.3); border: 1px solid #17a2b8; color: #17a2b8; }
        .test-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin: 8px 0;
            transition: all 0.3s;
        }
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        .device-info {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 8px;
            padding: 10px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 0.8em;
            border: 1px solid #667eea;
        }
        .compatibility-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }
        .compatibility-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .url-test {
            background: rgba(0, 0, 0, 0.3);
            padding: 8px;
            margin: 5px 0;
            border-radius: 5px;
            font-family: monospace;
            font-size: 0.75em;
            word-break: break-all;
        }
        @media (max-width: 600px) {
            .compatibility-grid {
                grid-template-columns: 1fr;
            }
            .container {
                padding: 15px;
                margin: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“± Mobile Logo Test</h1>
        
        <div class="logo-preview">
            <h3>ğŸ¯ USDT.z Logo Preview</h3>
            <img src="https://khanitohm.github.io/usdtz-assets/assets/logo256.png" alt="USDT.z Logo" id="mainLogo">
            <div class="status info" id="logoStatus">
                ğŸ”„ Testing logo accessibility...
            </div>
        </div>

        <div class="device-info" id="deviceInfo">
            ğŸ” Detecting device information...
        </div>

        <div class="platform-test">
            <h3>ğŸ iOS Compatibility</h3>
            <div class="compatibility-grid">
                <div class="compatibility-item">
                    <strong>ğŸ“± iOS Safari</strong>
                    <div class="status info" id="iosSafariStatus">Testing...</div>
                </div>
                <div class="compatibility-item">
                    <strong>ğŸ¦Š MetaMask iOS</strong>
                    <div class="status info" id="iosMetaMaskStatus">Testing...</div>
                </div>
            </div>
            <button class="test-button" onclick="testIOSCompatibility()">
                ğŸ§ª Test iOS Integration
            </button>
            <div id="iosResults"></div>
        </div>

        <div class="platform-test">
            <h3>ğŸ¤– Android Compatibility</h3>
            <div class="compatibility-grid">
                <div class="compatibility-item">
                    <strong>ğŸ“± Android Chrome</strong>
                    <div class="status info" id="androidChromeStatus">Testing...</div>
                </div>
                <div class="compatibility-item">
                    <strong>ğŸ¦Š MetaMask Android</strong>
                    <div class="status info" id="androidMetaMaskStatus">Testing...</div>
                </div>
            </div>
            <button class="test-button" onclick="testAndroidCompatibility()">
                ğŸ§ª Test Android Integration
            </button>
            <div id="androidResults"></div>
        </div>

        <div class="platform-test">
            <h3>ğŸŒ URL Accessibility Test</h3>
            <div id="urlTests"></div>
            <button class="test-button" onclick="testAllUrls()">
                ğŸ”— Test All Logo URLs
            </button>
        </div>

        <div class="platform-test">
            <h3>ğŸ¦Š MetaMask Mobile Integration</h3>
            <div class="status info" id="metamaskMobileStatus">
                ğŸ”„ Checking MetaMask mobile compatibility...
            </div>
            <button class="test-button" onclick="testMetaMaskMobile()">
                ğŸ“± Test MetaMask Mobile
            </button>
            <div id="metamaskMobileResults"></div>
        </div>

        <div class="platform-test">
            <h3>ğŸ“Š Overall Compatibility Report</h3>
            <div class="status info" id="overallStatus">
                ğŸ”„ Generating compatibility report...
            </div>
        </div>
    </div>

    <script>
        const logoUrls = [
            'https://khanitohm.github.io/usdtz-assets/assets/logo256.png',
            'https://raw.githubusercontent.com/khanitohm/usdtz-assets/main/assets/logo256.png',
            'https://khanitohm.github.io/usdtz-assets/assets/logo.png',
            'https://raw.githubusercontent.com/khanitohm/usdtz-assets/main/assets/logo.png'
        ];

        let testResults = {
            ios: { safari: false, metamask: false },
            android: { chrome: false, metamask: false },
            urls: [],
            device: {},
            metamaskMobile: false
        };

        function detectDevice() {
            const ua = navigator.userAgent;
            const device = {
                platform: navigator.platform,
                userAgent: ua,
                isIOS: /iPad|iPhone|iPod/.test(ua),
                isAndroid: /Android/.test(ua),
                isMobile: /Mobi|Android/i.test(ua),
                isSafari: /Safari/.test(ua) && !/Chrome/.test(ua),
                isChrome: /Chrome/.test(ua),
                isMetaMask: typeof window.ethereum !== 'undefined',
                screenWidth: screen.width,
                screenHeight: screen.height,
                devicePixelRatio: window.devicePixelRatio
            };

            testResults.device = device;

            const deviceInfoDiv = document.getElementById('deviceInfo');
            deviceInfoDiv.innerHTML = `
                ğŸ” <strong>Device Detection:</strong><br>
                ğŸ“± Platform: ${device.platform}<br>
                ğŸ“Š Screen: ${device.screenWidth}x${device.screenHeight} (${device.devicePixelRatio}x)<br>
                ğŸŒ Browser: ${device.isSafari ? 'Safari' : device.isChrome ? 'Chrome' : 'Other'}<br>
                ğŸ“± Mobile: ${device.isMobile ? 'Yes' : 'No'}<br>
                ğŸ iOS: ${device.isIOS ? 'Yes' : 'No'}<br>
                ğŸ¤– Android: ${device.isAndroid ? 'Yes' : 'No'}<br>
                ğŸ¦Š MetaMask: ${device.isMetaMask ? 'Detected' : 'Not Detected'}
            `;

            return device;
        }

        async function testLogoUrl(url) {
            return new Promise((resolve) => {
                const img = new Image();
                const startTime = Date.now();
                
                img.onload = () => {
                    const loadTime = Date.now() - startTime;
                    resolve({
                        url: url,
                        success: true,
                        loadTime: loadTime,
                        width: img.naturalWidth,
                        height: img.naturalHeight
                    });
                };
                
                img.onerror = () => {
                    resolve({
                        url: url,
                        success: false,
                        loadTime: Date.now() - startTime,
                        error: 'Failed to load'
                    });
                };
                
                img.src = url + '?v=' + Date.now();
            });
        }

        async function testAllUrls() {
            const urlTestsDiv = document.getElementById('urlTests');
            urlTestsDiv.innerHTML = '<div class="status info">ğŸ”„ Testing all logo URLs...</div>';

            testResults.urls = [];

            for (const url of logoUrls) {
                const urlDiv = document.createElement('div');
                urlDiv.className = 'url-test';
                urlDiv.innerHTML = `ğŸ”„ Testing: ${url}`;
                urlTestsDiv.appendChild(urlDiv);

                const result = await testLogoUrl(url);
                testResults.urls.push(result);

                if (result.success) {
                    urlDiv.className = 'url-test';
                    urlDiv.innerHTML = `âœ… ${url}<br>ğŸ“ ${result.width}x${result.height}px | â±ï¸ ${result.loadTime}ms`;
                    urlDiv.style.borderColor = '#28a745';
                } else {
                    urlDiv.className = 'url-test';
                    urlDiv.innerHTML = `âŒ ${url}<br>âš ï¸ ${result.error} | â±ï¸ ${result.loadTime}ms`;
                    urlDiv.style.borderColor = '#dc3545';
                }
            }

            updateOverallStatus();
        }

        async function testIOSCompatibility() {
            const device = testResults.device;
            const iosResultsDiv = document.getElementById('iosResults');
            
            if (device.isIOS) {
                document.getElementById('iosSafariStatus').className = 'status success';
                document.getElementById('iosSafariStatus').textContent = 'âœ… Running on iOS Safari';
                testResults.ios.safari = true;

                if (device.isMetaMask) {
                    document.getElementById('iosMetaMaskStatus').className = 'status success';
                    document.getElementById('iosMetaMaskStatus').textContent = 'âœ… MetaMask detected on iOS';
                    testResults.ios.metamask = true;
                } else {
                    document.getElementById('iosMetaMaskStatus').className = 'status warning';
                    document.getElementById('iosMetaMaskStatus').textContent = 'âš ï¸ MetaMask not detected';
                }

                iosResultsDiv.innerHTML = `
                    <div class="status success">
                        âœ… <strong>iOS Compatibility:</strong><br>
                        ğŸ“± Device: iOS ${device.isIOS ? 'Detected' : 'Not Detected'}<br>
                        ğŸŒ Safari: ${device.isSafari ? 'Yes' : 'No'}<br>
                        ğŸ¦Š MetaMask: ${device.isMetaMask ? 'Available' : 'Not Available'}<br>
                        ğŸ“ Screen: ${device.screenWidth}x${device.screenHeight}
                    </div>
                `;
            } else {
                document.getElementById('iosSafariStatus').className = 'status info';
                document.getElementById('iosSafariStatus').textContent = 'â„¹ï¸ Not running on iOS';
                
                document.getElementById('iosMetaMaskStatus').className = 'status info';
                document.getElementById('iosMetaMaskStatus').textContent = 'â„¹ï¸ iOS test requires iOS device';

                iosResultsDiv.innerHTML = `
                    <div class="status info">
                        â„¹ï¸ <strong>iOS Testing:</strong><br>
                        ğŸ“± Current device is not iOS<br>
                        ğŸ§ª To test iOS compatibility:<br>
                        1. Open this page on iPhone/iPad<br>
                        2. Test in Safari browser<br>
                        3. Test with MetaMask iOS app
                    </div>
                `;
            }

            updateOverallStatus();
        }

        async function testAndroidCompatibility() {
            const device = testResults.device;
            const androidResultsDiv = document.getElementById('androidResults');
            
            if (device.isAndroid) {
                document.getElementById('androidChromeStatus').className = 'status success';
                document.getElementById('androidChromeStatus').textContent = 'âœ… Running on Android Chrome';
                testResults.android.chrome = true;

                if (device.isMetaMask) {
                    document.getElementById('androidMetaMaskStatus').className = 'status success';
                    document.getElementById('androidMetaMaskStatus').textContent = 'âœ… MetaMask detected on Android';
                    testResults.android.metamask = true;
                } else {
                    document.getElementById('androidMetaMaskStatus').className = 'status warning';
                    document.getElementById('androidMetaMaskStatus').textContent = 'âš ï¸ MetaMask not detected';
                }

                androidResultsDiv.innerHTML = `
                    <div class="status success">
                        âœ… <strong>Android Compatibility:</strong><br>
                        ğŸ“± Device: Android ${device.isAndroid ? 'Detected' : 'Not Detected'}<br>
                        ğŸŒ Chrome: ${device.isChrome ? 'Yes' : 'No'}<br>
                        ğŸ¦Š MetaMask: ${device.isMetaMask ? 'Available' : 'Not Available'}<br>
                        ğŸ“ Screen: ${device.screenWidth}x${device.screenHeight}
                    </div>
                `;
            } else {
                document.getElementById('androidChromeStatus').className = 'status info';
                document.getElementById('androidChromeStatus').textContent = 'â„¹ï¸ Not running on Android';
                
                document.getElementById('androidMetaMaskStatus').className = 'status info';
                document.getElementById('androidMetaMaskStatus').textContent = 'â„¹ï¸ Android test requires Android device';

                androidResultsDiv.innerHTML = `
                    <div class="status info">
                        â„¹ï¸ <strong>Android Testing:</strong><br>
                        ğŸ“± Current device is not Android<br>
                        ğŸ§ª To test Android compatibility:<br>
                        1. Open this page on Android device<br>
                        2. Test in Chrome browser<br>
                        3. Test with MetaMask Android app
                    </div>
                `;
            }

            updateOverallStatus();
        }

        async function testMetaMaskMobile() {
            const metamaskMobileStatusDiv = document.getElementById('metamaskMobileStatus');
            const metamaskMobileResultsDiv = document.getElementById('metamaskMobileResults');
            
            if (typeof window.ethereum !== 'undefined') {
                metamaskMobileStatusDiv.className = 'status success';
                metamaskMobileStatusDiv.textContent = 'âœ… MetaMask detected - Testing mobile integration...';
                
                try {
                    // Test wallet_watchAsset on mobile
                    const timestamp = Date.now();
                    const result = await window.ethereum.request({
                        method: 'wallet_watchAsset',
                        params: {
                            type: 'ERC20',
                            options: {
                                address: '0x5AcE9601716FED9Fd3718bC6144dB8f77a86bd21',
                                symbol: 'USDTz',
                                decimals: 18,
                                image: `https://khanitohm.github.io/usdtz-assets/assets/logo256.png?v=${timestamp}`
                            }
                        }
                    });
                    
                    testResults.metamaskMobile = true;
                    metamaskMobileStatusDiv.className = 'status success';
                    metamaskMobileStatusDiv.textContent = 'âœ… MetaMask mobile integration successful!';
                    
                    metamaskMobileResultsDiv.innerHTML = `
                        <div class="status success">
                            ğŸ‰ <strong>MetaMask Mobile Test Result:</strong><br>
                            âœ… USDT.z token added successfully<br>
                            âœ… Logo should now display in MetaMask mobile<br>
                            ğŸ“± Platform: ${testResults.device.isIOS ? 'iOS' : testResults.device.isAndroid ? 'Android' : 'Other'}<br>
                            ğŸ¦Š Integration: Working
                        </div>
                    `;
                } catch (error) {
                    metamaskMobileStatusDiv.className = 'status error';
                    metamaskMobileStatusDiv.textContent = 'âŒ MetaMask mobile integration failed';
                    
                    metamaskMobileResultsDiv.innerHTML = `
                        <div class="status error">
                            âŒ <strong>MetaMask Mobile Test Failed:</strong><br>
                            ğŸš« Error: ${error.message}<br>
                            ğŸ“± Platform: ${testResults.device.isIOS ? 'iOS' : testResults.device.isAndroid ? 'Android' : 'Other'}<br>
                            ğŸ”§ Recommendation: Try manual token addition
                        </div>
                    `;
                }
            } else {
                metamaskMobileStatusDiv.className = 'status warning';
                metamaskMobileStatusDiv.textContent = 'âš ï¸ MetaMask not detected on this device';
                
                metamaskMobileResultsDiv.innerHTML = `
                    <div class="status warning">
                        âš ï¸ <strong>MetaMask Not Available:</strong><br>
                        ğŸ“± Platform: ${testResults.device.isIOS ? 'iOS' : testResults.device.isAndroid ? 'Android' : 'Desktop'}<br>
                        ğŸ¦Š MetaMask: Not installed or not accessible<br>
                        ğŸ’¡ Install MetaMask mobile app to test integration
                    </div>
                `;
            }

            updateOverallStatus();
        }

        function updateOverallStatus() {
            const overallStatusDiv = document.getElementById('overallStatus');
            const device = testResults.device;
            const urlSuccessCount = testResults.urls.filter(u => u.success).length;
            const totalUrls = testResults.urls.length;
            
            let statusText = 'ğŸ“Š <strong>Compatibility Report:</strong><br>';
            let statusClass = 'status info';
            
            // Platform detection
            if (device.isIOS) {
                statusText += 'ğŸ iOS: Detected<br>';
                statusClass = 'status success';
            } else if (device.isAndroid) {
                statusText += 'ğŸ¤– Android: Detected<br>';
                statusClass = 'status success';
            } else {
                statusText += 'ğŸ’» Desktop: Detected<br>';
            }
            
            // URL testing
            if (totalUrls > 0) {
                statusText += `ğŸ”— Logo URLs: ${urlSuccessCount}/${totalUrls} working<br>`;
                if (urlSuccessCount === totalUrls) {
                    statusText += 'âœ… All logo URLs accessible<br>';
                } else if (urlSuccessCount > 0) {
                    statusText += 'âš ï¸ Some logo URLs working<br>';
                } else {
                    statusText += 'âŒ No logo URLs working<br>';
                    statusClass = 'status error';
                }
            }
            
            // MetaMask detection
            if (device.isMetaMask) {
                statusText += 'ğŸ¦Š MetaMask: Available<br>';
                if (testResults.metamaskMobile) {
                    statusText += 'âœ… Mobile integration: Working<br>';
                    statusText += 'ğŸ‰ <strong>LOGO SHOULD DISPLAY IN MOBILE METAMASK!</strong>';
                } else {
                    statusText += 'âš ï¸ Mobile integration: Test needed';
                }
            } else {
                statusText += 'âš ï¸ MetaMask: Not detected<br>';
                statusText += 'ğŸ“± Install MetaMask mobile app for full testing';
            }
            
            overallStatusDiv.className = statusClass;
            overallStatusDiv.innerHTML = statusText;
        }

        // Auto-run tests on page load
        window.addEventListener('load', () => {
            detectDevice();
            
            // Auto-test everything after 2 seconds
            setTimeout(async () => {
                await testAllUrls();
                await testIOSCompatibility();
                await testAndroidCompatibility();
                
                // Auto-test MetaMask if available
                if (testResults.device.isMetaMask && testResults.device.isMobile) {
                    setTimeout(testMetaMaskMobile, 2000);
                }
            }, 2000);
        });
    </script>
</body>
</html>